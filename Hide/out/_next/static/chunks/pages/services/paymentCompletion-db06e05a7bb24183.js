(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[584],{58340:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/services/paymentCompletion",function(){return n(20358)}])},23642:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(85893),s=n(67294),i=n(9473),c=n(96246),a=n(49486);function l(e){let{setStripePromise:t}=e,n=(0,i.v9)(e=>e.auth.stripePublishableKey);return(0,s.useEffect)(()=>{n&&((0,a.qu)(!1,"stripePublishableKey"),t((0,c.J)(n)))},[n]),(0,r.jsx)("p",{hidden:!0,children:"Load Stripe"})}},20358:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(85893),s=n(67294),i=n(9473),c=n(11163),a=n(10682),l=n(35005),u=n(23642),o=n(31243),d=n(17384);function h(){let e=(0,i.I0)(),t=(0,c.useRouter)(),[n,h]=(0,s.useState)(null),[p,m]=(0,s.useState)(null),[f,v]=(0,s.useState)(null);return(0,s.useEffect)(()=>{n&&n.then(async t=>{let n=new URL(window.location).searchParams.get("payment_intent_client_secret"),{error:r,paymentIntent:s}=await t.retrievePaymentIntent(n);r?v(r):(m(s),e((0,d.Mp)()))})},[n]),(0,r.jsxs)(o.Z,{children:[(0,r.jsxs)(a.Z,{children:[f&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("img",{src:"/images/sorry_196.png"})}),(0,r.jsx)("h3",{className:"text-center",children:"We're sorry, but the payment has failed."}),(0,r.jsx)("p",{className:"text-center",children:f&&f.message}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(l.Z,{onClick:()=>{t.push("/services/payment")},children:"Please retry"})})]}),!f&&p&&"succeeded"===p.status&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("img",{src:"/images/thank_196.png"})}),(0,r.jsx)("h1",{className:"text-center",children:"Thank you!"}),(0,r.jsx)("h3",{className:"text-center",children:"Payment succeeded."}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(l.Z,{onClick:()=>{t.push("/safe")},children:"Done"})})]}),!f&&p&&"succeeded"!==p.status&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("img",{src:"/images/sorry_196.png"})}),(0,r.jsx)("h3",{className:"text-center",children:"We're sorry, the payment did not succeed."}),(0,r.jsxs)("h4",{className:"text-center",children:["Status: ",p.status]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(l.Z,{onClick:()=>{t.push("/services/payment")},children:"Please retry"})})]})]}),(0,r.jsx)(u.Z,{setStripePromise:h})]})}},96246:function(e,t,n){"use strict";n.d(t,{J:function(){return f}});var r,s="https://js.stripe.com/v3",i=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,c=function(){for(var e=document.querySelectorAll('script[src^="'.concat(s,'"]')),t=0;t<e.length;t++){var n=e[t];if(i.test(n.src))return n}return null},a=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(s).concat(t);var r=document.head||document.body;if(!r)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},l=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"3.0.7",startTime:t})},u=null,o=null,d=null,h=function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return l(r,n),r},p=!1,m=function(){return r||(r=(null!==u?u:(u=new Promise(function(e,t){if("undefined"==typeof window||"undefined"==typeof document){e(null);return}if(window.Stripe,window.Stripe){e(window.Stripe);return}try{var n,r=c();r?r&&null!==d&&null!==o&&(r.removeEventListener("load",d),r.removeEventListener("error",o),null===(n=r.parentNode)||void 0===n||n.removeChild(r),r=a(null)):r=a(null),d=function(){window.Stripe?e(window.Stripe):t(Error("Stripe.js not available"))},o=function(){t(Error("Failed to load Stripe.js"))},r.addEventListener("load",d),r.addEventListener("error",o)}catch(e){t(e);return}})).catch(function(e){return u=null,Promise.reject(e)})).catch(function(e){return r=null,Promise.reject(e)}))};Promise.resolve().then(function(){return m()}).catch(function(e){p||console.warn(e)});var f=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];p=!0;var r=Date.now();return m().then(function(e){return h(e,t,r)})}}},function(e){e.O(0,[6760,1243,9774,2888,179],function(){return e(e.s=58340)}),_N_E=e.O()}]);