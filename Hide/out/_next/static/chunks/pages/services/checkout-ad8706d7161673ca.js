(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2037],{87443:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/services/checkout",function(){return t(13898)}])},23642:function(e,n,t){"use strict";t.d(n,{Z:function(){return r}});var s=t(85893),c=t(67294),a=t(9473),o=t(96246),i=t(49486);function r(e){let{setStripePromise:n}=e,t=(0,a.v9)(e=>e.auth.stripePublishableKey);return(0,c.useEffect)(()=>{t&&((0,i.qu)(!1,"stripePublishableKey"),n((0,o.J)(t)))},[t]),(0,s.jsx)("p",{hidden:!0,children:"Load Stripe"})}},13898:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return f}});var s=t(85893),c=t(67294),a=t(9473),o=t(11163),i=t(10682),r=t(34051),u=t(31555);t(86664);var l=t(31243);t(23642);var p=t(43385),d=t(17384),h=t(49486);function f(){let e=(0,o.useRouter)(),n=(0,a.I0)(),[t,f]=(0,c.useState)(null),w=(0,a.v9)(e=>e.auth.isLoggedIn);(0,a.v9)(e=>e.account.stripeClientSecret);let g=(0,a.v9)(e=>e.account.appleClientSecret),b=(0,a.v9)(e=>e.account.checkoutItem),k=(0,a.v9)(e=>e.account.invoice),v=(0,a.v9)(e=>e.account.checkoutPlan),x=k&&k.planOptions,m=x&&x[v].planId;(0,h.qu)(!0,"isLoggedIn: ".concat(w,", checkoutPlan: ").concat(v));let _=t=>{(0,h.qu)(!0,"transactionWebCall",t);let s=t.transaction;"ok"===t.status?n((0,d.cK)({transaction:s})):e.push("/services/payment"),n((0,d.Xz)(p.op.IOSInAppPurchase))};return(0,c.useEffect)(()=>{w&&v&&((0,h.qu)(!0,"createApplePaymentIntentThunk"),n((0,d.fM)({checkoutPlan:v})))},[w,v]),(0,c.useEffect)(()=>{(0,h.qu)(!0,"appleCientSecret: ",g),g&&(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.toggleMessageHandler&&(console.log("checkout"),n((0,d.z8)(p.op.IOSInAppPurchase)),window.bsafesNative.transactionWebCall=_,window.webkit.messageHandlers.toggleMessageHandler.postMessage({action:"checkout",planId:m,appleClientSecret:g})),n((0,d.GY)()))},[g]),(0,s.jsxs)(l.Z,{children:[(0,s.jsxs)(i.Z,{children:[(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(r.Z,{children:(0,s.jsx)(u.Z,{xs:{span:12},sm:{span:10,offset:1},md:{span:8,offset:2},lg:{span:6,offset:3},children:(0,s.jsx)("div",{style:{borderStyle:"solid"},className:"p-3",children:b&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"Total Amount:"}),(0,s.jsx)("h4",{children:"$".concat((b.amount/100).toFixed(2)," ").concat(b.currency.toUpperCase())})]})})})}),!1]}),!1]})}}},function(e){e.O(0,[6760,5339,1243,9774,2888,179],function(){return e(e.s=87443)}),_N_E=e.O()}]);