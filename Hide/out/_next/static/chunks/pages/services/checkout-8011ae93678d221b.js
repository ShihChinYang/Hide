(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2037],{87443:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/services/checkout",function(){return t(13898)}])},23642:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var s=t(85893),r=t(67294),i=t(9473),c=t(96246),o=t(49486);function a(e){let{setStripePromise:n}=e,t=(0,i.v9)(e=>e.auth.stripePublishableKey);return(0,r.useEffect)(()=>{t&&((0,o.qu)(!1,"stripePublishableKey"),n((0,c.J)(t)))},[t]),(0,s.jsx)("p",{hidden:!0,children:"Load Stripe"})}},13898:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return m}});var s=t(85893),r=t(67294),i=t(9473),c=t(10682),o=t(34051),a=t(31555),u=t(86664),l=t(31243),d=t(23642);function p(){let e=(0,u.useStripe)(),n=(0,u.useElements)(),[t,i]=(0,r.useState)(null),[c,o]=(0,r.useState)(!1),a=async t=>{if(t.preventDefault(),!e||!n)return;o(!0);let{error:s}=await e.confirmPayment({elements:n,confirmParams:{return_url:"".concat(window.location.origin,"/services/paymentCompletion")}});"card_error"===s.type||"validation_error"===s.type?i(s.message):i("An unexpected error occured."),o(!1)};return(0,s.jsxs)("form",{id:"payment-form",onSubmit:a,children:[!1,(0,s.jsx)(u.PaymentElement,{id:"payment-element"}),(0,s.jsx)("button",{disabled:c||!e||!n,id:"submit",children:(0,s.jsx)("span",{id:"button-text",children:c?(0,s.jsx)("div",{className:"spinner",id:"spinner"}):"Pay now"})}),t&&(0,s.jsx)("div",{id:"payment-message",children:t})]})}var f=t(17384);function m(){let e=(0,i.I0)(),[n,t]=(0,r.useState)(null),m=(0,i.v9)(e=>e.auth.isLoggedIn),h=(0,i.v9)(e=>e.account.stripeClientSecret),x=(0,i.v9)(e=>e.account.checkoutItem),j=(0,i.v9)(e=>e.account.checkoutPlan);return(0,r.useEffect)(()=>{m&&j&&e((0,f.Pe)({checkoutPlan:j}))},[m,j]),(0,s.jsxs)(l.Z,{children:[(0,s.jsxs)(c.Z,{children:[(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(o.Z,{children:(0,s.jsx)(a.Z,{xs:{span:12},sm:{span:10,offset:1},md:{span:8,offset:2},lg:{span:6,offset:3},children:(0,s.jsx)("div",{style:{borderStyle:"solid"},className:"p-3",children:x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"Total Amount:"}),(0,s.jsx)("h4",{children:"$".concat((x.amount/100).toFixed(2)," ").concat(x.currency.toUpperCase())})]})})})}),(0,s.jsx)(o.Z,{children:(0,s.jsx)(a.Z,{xs:{span:12},sm:{span:10,offset:1},md:{span:8,offset:2},lg:{span:6,offset:3},children:(0,s.jsx)("div",{style:{borderStyle:"solid"},className:"p-3",children:h&&n&&(0,s.jsx)(u.Elements,{stripe:n,options:{clientSecret:h},children:(0,s.jsx)(p,{})})})})})]}),(0,s.jsx)(d.Z,{setStripePromise:t})]})}t(49486)}},function(e){e.O(0,[6760,5339,1243,9774,2888,179],function(){return e(e.s=87443)}),_N_E=e.O()}]);